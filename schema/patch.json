{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "OCI Patch Specification for image/index/manifest/configs and layers",
    "title": "OCI Image Patch",
    "id": "https://bazer.io/schema/patch",
    "type": "object",
    "properties": {
        "schemaVersion": {
            "title": "Schema Version",
            "description": "The schema version for this patch specification.",
            "type": "integer",
            "minimum": 1,
            "maximum": 1,
            "examples": [1]
        },
        "mediaType": {
            "title": "Media Type",
            "description": "The media type of the patch specification artifact.",
            "type": "string",
            "enum": ["application/vnd.bazer.image.patch.v1+json"],
            "examples": ["application/vnd.bazer.image.patch.v1+json"]
        },
        "artifactType": {
            "title": "Artifact Type",
            "description": "The IANA media type of this artifact.",
            "$ref": "defs-descriptor.json#/definitions/mediaType"
        },
        "created": {
            "title": "Creation Timestamp",
            "description": "An RFC 3339 timestamp indicating when the patch was created.",
            "type": "string",
            "format": "date-time",
            "examples": ["2024-05-20T14:30:00Z"]
        },
        "author": {
            "title": "Author",
            "description": "The author or entity responsible for creating the patch.",
            "type": "string",
            "examples": ["Some Corp <some.corp@example.com>"]
        },
        "description": {
            "title": "Description",
            "description": "A human-readable description of the patch's purpose.",
            "type": "string",
            "examples": ["This patch updates the base image to the latest version."]
        },
        "subject": {
            "title": "Subject",
            "description": "The OCI descriptor (manifest, config, or index) that this patch targets.",
            "$ref": "https://opencontainers.org/schema/descriptor"
        },
        "data": {
            "title": "Embedded Content",
            "description": "An embedding of the targeted content.",
            "$ref": "defs.json#/definitions/base64",
            "contentEncoding": "base64"
        },
        "users": {
            "title": "Users",
            "description": "A list of users associated with this patch.",
            "type": "array",
            "items": {
                "$ref": "user.json#"
            }
        },
        "teams": {
            "title": "Teams",
            "description": "A list of teams associated with this patch.",
            "type": "array",
            "items": {
                "$ref": "team.json#"
            }
        },
        "patches": {
            "title": "Patches",
            "description": "A list of actions to be applied to the target.",
            "type": "array",
            "items": {
                "$ref": "layer-action.json#"
            }
        },
        "audit": {
            "title": "Audit Log",
            "description": "An audit log detailing the steps taken in the patch.",
            "type": "array",
            "items": {
                "description": "An entry in the audit log.",
                "$ref": "audit.json#"
            }
        },
        "annotations": {
            "id": "https://opencontainers.org/schema/descriptor/annotations",
            "$ref": "defs-descriptor.json#/definitions/annotations"
        }
    },
    "required": [
        "schemaVersion",
        "mediaType",
        "created",
        "users",
        "patches"
    ]
}